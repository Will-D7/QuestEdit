:root {
  /* Base colors */
  --primary: #4CAF50;
  --primary-dark: #2d4a2d;
  --danger: #f44336;
  --info: #2196F3;
  --warning: #FF9800;
  --accent: #9C27B0;
  --accent-dark: #7B1FA2;
  
  /* Light theme defaults */
  --bg-body: #f5f5f5;
  --bg-cell: #fff;
  --border-cell: #ddd;
  --bg-active-cell: #e8f5e9;
  --text-primary: #333;
  --text-secondary: #666;
  --panel-bg: rgba(255, 255, 255, 0.95);
  --panel-border: #ddd;
  --input-bg: #fff;
  --btn-secondary-bg: #f0f0f0;
  --block-palette: #3a3a3a;
  --block-program: #2d4a2d;
  --map-item-bg: #fff;
  --map-item-selected: #e0f2e0;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-body: #0a0a0a;
    --bg-cell: #1a1a1a;
    --border-cell: #2a2a2a;
    --bg-active-cell: #2d4a2b;
    --text-primary: #f0f0f0;
    --text-secondary: #aaa;
    --panel-bg: rgba(20, 20, 20, 0.95);
    --panel-border: #333;
    --input-bg: #2a2a2a;
    --btn-secondary-bg: #2a2a2a;
    --block-palette: #4a6572;
    --block-program: #2d4a2d;
    --map-item-bg: #2a2a2a;
    --map-item-selected: #2d4a2b;
  }
}

* { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
  -webkit-tap-highlight-color: transparent;
}

body { 
  overflow: hidden; 
  touch-action: none; 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: var(--bg-body);
  color: var(--text-primary);
}

.cell { 
  background: var(--bg-cell) !important; 
  border-color: var(--border-cell) !important; 
}

.cell.active { 
  background: var(--bg-active-cell) !important; 
  border-color: var(--primary) !important;
  box-shadow: inset 0 0 0 2px var(--primary);
}

.controls, .editor-panel, .prog-panel, .modal-content, .homework-panel { 
  background: var(--panel-bg) !important; 
  color: var(--text-primary) !important;
  border: 1px solid var(--panel-border);
}

.tab-btn, input, select, textarea {
  background: var(--input-bg) !important; 
  border-color: var(--border-cell) !important;
  color: var(--text-primary) !important;
}

.item-type-btn.selected, .tab-btn.active {
  border-color: var(--primary) !important;
}

.dpad-btn, .hero-switch-btn {
  background: var(--btn-secondary-bg);
  border-color: var(--border-cell);
}

.cmd-block {
  background: var(--block-palette) !important;
  border-color: var(--border-cell) !important;
}

.program-block {
  background: var(--block-program) !important;
  border-color: var(--border-cell) !important;
}

/* FAB buttons */
.fab {
  background: var(--primary);
}
.fab.editing {
  background: var(--danger);
}
.prog-fab {
  background: var(--info);
}
.prog-fab.active {
  background: var(--warning);
}
.homework-fab, .hw-fab {
  background: var(--accent);
}
.homework-fab.active {
  background: var(--accent-dark);
}

/* Map list styling */
.map-list-item {
  background-color: var(--map-item-bg);
}
.map-list-item.selected {
  background-color: var(--map-item-selected);
  border-color: var(--primary);
}

/* Inputs and buttons */
.btn-primary {
  background: var(--primary);
}
.btn-warning {
  background: var(--warning);
}
.btn-success {
  background: var(--info);
}
.arg-input {
  background: rgba(0,0,0,0.2);
  border-color: rgba(255,255,255,0.3);
}

/* Text elements */
.map-info, .homework-info {
  color: var(--text-secondary);
}

